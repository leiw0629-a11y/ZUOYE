/* ================== æ‰¹é‡å½•å…¥å¼¹çª—ï¼ˆcleanedï¼‰ ==================
   ç”¨åˆ°çš„æ¨¡æ¿/é€»è¾‘ï¼š
   - tpl_batch_entry.js é‡Œçš„ batchEntry æ¨¡æ¿
   - logic_batch.js é‡Œå¯¹ .is-picking / .active / .done çš„åˆ‡æ¢
   è¯´æ˜ï¼šå·²åˆå¹¶é‡å¤è§„åˆ™ã€åˆ é™¤å†—ä½™é‡å¤å®šä¹‰ï¼ˆå°¤å…¶æ˜¯ .batch-subject-item.doneï¼‰ã€‚
================================================================ */

/* 1) å…¨å±é®ç½© */
.batch-overlay{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  background:rgba(93,64,55,0.5);
  backdrop-filter:blur(8px);
  z-index:2000;
  display:flex;
  justify-content:center;
  align-items:center;
  animation:batch_fadeIn 0.3s ease-out;
}

@keyframes batch_fadeIn{
  from{opacity:0;transform:scale(0.95);}
  to{opacity:1;transform:scale(1);}
}

/* 2) å¤–å±‚å¸ƒå±€å®¹å™¨ï¼ˆå¤§å¡ç‰‡èƒŒæ™¯ï¼‰ */
.batch-layout-container{
  width:980px;
  height:85vh;
  max-height:800px;
  min-height:600px;

  background-color:#FFF9F0;
  background-image:radial-gradient(#FFE0B2 1px, transparent 1px);
  background-size:20px 20px;

  border-radius:28px;
  border:6px solid #FFFFFF;
  box-shadow:
    0 0 0 2px #FFCCBC,
    0 20px 50px rgba(93,64,55,0.2);

  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* ================= åŒºåŸŸ Aï¼šé¡¶éƒ¨æ ‡é¢˜æ  ================= */
.batch-header-card{
  height:80px;
  background:rgba(255,255,255,0.9);
  flex-shrink:0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 30px;
  border-bottom:3px dashed #FFEEE4;
  z-index:10;
}

.batch-header-left{
  display:flex;
  align-items:baseline;
  gap:1px;
}

/* å³ä¾§åªæ˜¯æ”¾ä¸€ä¸ªå…³é—­æŒ‰é’®ï¼Œç»™ä¸ªé»˜è®¤å¸ƒå±€ï¼ˆæ¨¡æ¿é‡Œç”¨åˆ° batch-header-rightï¼‰ */
.batch-header-right{
  display:flex;
  align-items:center;
}

.batch-title-class{
  font-size:24px;
  font-weight:900;
  background:linear-gradient(135deg,#FF6B6B 0%,#FF8E53 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  letter-spacing:1px;
}

.batch-btn-close{
  width:36px;
  height:36px;
  border-radius:50%;
  background:#FFF;
  border:2px solid #FFCCBC;
  font-size:16px;
  color:#FF6B6B;
  cursor:pointer;
  transition:0.3s;
  display:flex;
  align-items:center;
  justify-content:center;
}
.batch-btn-close:hover{
  background:#FF6B6B;
  color:#fff;
  border-color:#FF6B6B;
  transform:rotate(90deg) scale(1.1);
}

/* ================= åŒºåŸŸ Bï¼šä¸‹æ–¹ä¸»ä½“ï¼ˆå·¦å³åŒå¡ç‰‡ï¼‰ ================= */
.batch-body-split{
  display:flex;
  flex:1;
  overflow:hidden;
  background:transparent;
  padding:20px;
  gap:20px;
}

/* å³ä¾§ä¸»åŒºåŸŸï¼ˆç™½å¡ç‰‡ï¼‰ */
.batch-main-card{
  flex:1;
  background:#FFFFFF;
  border-radius:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.03);
  margin:0;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  position:relative;
}

/* å³ä¾§å·¥å…·æ¡ */
.batch-toolbar{
  height:60px;
  padding:0 25px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:2px dashed #FFF3E0;
  background:#FFF;
  flex-shrink:0;
}

.batch-toolbar-left{
  display:flex;
  align-items:center;
  gap:10px;
}

/* å³ä¾§æ ‡é¢˜ï¼ˆä»»åŠ¡åï¼‰æˆªæ–­ */
#batch_toolbar_subject_name{
  max-width:110px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  display:block;
}

/* æ—¥æœŸèƒ¶å›Šï¼ˆæ¨¡æ¿é‡Œå®é™…æ˜¾ç¤ºçš„æ˜¯ .batch-date-textï¼‰ */
.batch-date-wrapper{
  display:flex;
  align-items:center;
  background:#FFF9F0;
  border:2px solid #FFE0B2;
  padding:6px 15px;
  border-radius:50px;
  color:#5D4037;
  transition:0.2s;
}
.batch-date-wrapper:hover{
  border-color:#FF6B6B;
  background:#FFF;
}

/* æ—¥æœŸæ–‡å­—ï¼ˆå¸¦ğŸ“…ï¼‰ */
.batch-date-text{
  background:#FFF3E0;
  color:#E65100;
  border:1px solid #FFE0B2;
  font-size:13px;
  padding:3px 10px;
  border-radius:8px;
  font-weight:800;
  display:inline-block;
}
.batch-date-text::before{
  content:"ğŸ“… ";
  margin-right:4px;
  font-size:14px;
}

/* â€œå®Œæˆå½•å…¥â€æŒ‰é’® */
.batch-btn-confirm{
  background:#795548;
  color:#fff;
  border:none;
  padding:0 25px;
  height:38px;
  border-radius:50px;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  transition:0.2s;
  display:flex;
  align-items:center;
  gap:6px;
}
.batch-btn-confirm:hover{
  transform:translateY(-2px);
  background:#795548;
}

/* å…¨é€‰å¤é€‰æ¡† */
.batch-checkbox-wrapper{
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  margin-right:15px;
  font-size:14px;
  font-weight:800;
  color:#8D6E63;
  user-select:none;
  transition:color 0.2s;
}
.batch-checkbox-wrapper:hover{ color:#5D4037; }
.batch-checkbox-wrapper input[type="checkbox"]{
  width:18px;
  height:18px;
  cursor:pointer;
  accent-color:#FCF6ED;
}

/* å³ä¾§æ»šåŠ¨åŒºåŸŸï¼ˆå­¦ç”Ÿèƒ¶å›Šç½‘æ ¼ï¼‰ */
.batch-scroll-area{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(110px, 1fr));
  gap:15px;
  padding:25px;
  overflow-y:auto;
  align-content:start;
  background:#FFFFFF;
}

/* å­¦ç”Ÿèƒ¶å›Š */
.batch-student-capsule{
  display:flex;
  justify-content:center;
  align-items:center;
  height:44px;
  background:#FFF;
  color:#8D6E63;
  border:2px solid #FFEEE4;
  border-radius:12px;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
  user-select:none;
  transition:all 0.2s cubic-bezier(0.175,0.885,0.32,1.275);
  position:relative;
  overflow:hidden;
}
.batch-student-capsule:hover{
  border-color:#FFCCBC;
  color:#5D4037;
  transform:translateY(-2px);
  box-shadow:0 4px 12px rgba(255,107,107,0.1);
}
.batch-student-capsule.active{
  background:linear-gradient(135deg,#FF8E53 0%,#FF6B6B 100%);
  border-color:transparent;
  color:#FFFFFF !important;
  font-weight:800;
  box-shadow:0 4px 12px rgba(255,107,107,0.4);
  transform:scale(1.05);
}

/* ================= å·¦ä¾§ä¾§è¾¹æ ï¼ˆæ´»åŠ¨/ç§‘ç›®åˆ‡æ¢ï¼‰ ================= */
.batch-sidebar-card{
  width:250px;
  background:#FFFBF9;
  border-radius:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.03);
  display:flex;
  flex-direction:column;
  overflow:hidden; /* é˜²æ­¢å†…éƒ¨æº¢å‡ºåœ†è§’ */
  padding:0;
}

/* èåˆå¼å¤´éƒ¨ */
.batch-fusion-header{
  height:60px;
  padding:0 20px;
  display:flex;
  align-items:center;
  border-bottom:2px dashed #FFEEE4;
  background:#FFFBF9;
  flex-shrink:0;
  z-index:20;
}

.batch-title-trigger{
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
  width:100%;
  margin-left:0;
  padding:6px 0;
  border-radius:12px;
  cursor:pointer;
  transition:all 0.2s ease;
}
.batch-title-trigger:hover{ background:#FFF3E0; }

.batch-current-name{
  font-size:16px;
  font-weight:800;
  color:#5D4037;
  margin:0;
  display:block;
  max-width:180px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  text-align:center;
}

.batch-arrow-icon{
  margin-left:8px;
  color:#FF7043;
  font-weight:800;
  font-size:14px;
  transition:transform 0.3s;
  animation:batch_arrow_float 2s infinite ease-in-out;
}
@keyframes batch_arrow_float{
  0%,100%{transform:translateY(0);opacity:0.7;}
  50%{transform:translateY(2px);opacity:1;}
}

/* å±•å¼€çŠ¶æ€ä¸‹ç®­å¤´æ—‹è½¬ */
.batch-sidebar-card.is-picking .batch-arrow-icon{
  transform:rotate(180deg);
  animation:none;
}

.batch-sidebar-stack{
  position:relative;
  flex:1;
  overflow:hidden;
}

/* é€šç”¨é¢æ¿å±‚ */
.batch-panel-view{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  background:#FFFBF9;
  transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
}

/* é¢æ¿Aï¼šç§‘ç›®åˆ—è¡¨ */
#batch-view-subjects{
  z-index:5;
  opacity:1;
  transform:translateY(0);
}
.batch-sidebar-card.is-picking #batch-view-subjects{
  filter:blur(4px);
  opacity:0.3;
  transform:scale(0.95);
  pointer-events:none;
}

/* é¢æ¿Bï¼šæ´»åŠ¨é€‰æ‹©å™¨ */
.batch-picker-view{
  z-index:10;
  opacity:0;
  transform:translateY(20px);
  pointer-events:none;
  padding:15px;
}
.batch-sidebar-card.is-picking .batch-picker-view{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

.batch-picker-search{ margin-bottom:10px; flex-shrink:0; }
.batch-picker-list-content{ overflow-y:auto; flex:1; }

/* ç§‘ç›®åˆ—è¡¨å®¹å™¨ */
.batch-subject-list{
  display:flex;
  flex-direction:column;
  gap:10px;
  flex:1;
  padding:20px;
  overflow-y:auto;
}

/* ç§‘ç›®æŒ‰é’® */
.batch-subject-item{
  padding:14px 18px;
  border-radius:16px;
  background:#FDFDFD;
  color:#8D6E63;
  border:2px solid transparent;
  font-size:15px;
  font-weight:700;
  cursor:pointer;
  transition:all 0.2s;
  display:flex;
  align-items:center;
  justify-content:space-between;

  /* tooltip / z-index çš„å®šä½åŸºå‡† */
  position:relative;
  z-index:0;
}
.batch-subject-item:hover{
  transform:translateX(3px);
  background:#FFFBF7;
  color:#5D4037;
  border-color:#FFE0B2;
  z-index:9999; /* tooltip ä¸è¢«å‹ä½ */
}
.batch-subject-item.active{
  background:#FFF3E0;
  color:#E65100;
  border-color:#FFB74D;
  box-shadow:0 4px 10px rgba(255,183,77,0.2);
}

/* æ–‡å­—æˆªæ–­ï¼ˆæŒ‰é’®å†…éƒ¨ spanï¼‰ */
.batch-subject-item span{
  flex:1;
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  display:block;
}

/* å·²å®Œæˆï¼ˆæ²‰åº• + ç°åŒ– + ç¦ç”¨æ‰‹åŠ¿ï¼‰ */
.batch-subject-item.done{
  background-color:#f5f5f5;
  color:#bdbdbd;
  border-color:transparent;
  cursor:default;
  order:999;
  filter:grayscale(100%);
  opacity:0.55;
}

/* done çš„ hoverï¼šä¸å¹³ç§»ï¼Œä½†å…è®¸ tooltip æ˜¾ç¤º */
.batch-subject-item.done:hover{
  transform:none;
}

/* done çš„ tooltipï¼ˆæ¥è‡ª JS çš„ data-tooltipï¼‰ */
.batch-subject-item.done::after{
  content:attr(data-tooltip);
  position:absolute;
  left:0;
  top:100%;
  margin-top:8px;
  background-color:rgba(51,51,51,0.9);
  color:#fff;
  padding:6px 10px;
  border-radius:4px;
  font-size:12px;
  white-space:nowrap;
  z-index:10000;
  box-shadow:2px 2px 8px rgba(0,0,0,0.2);
  pointer-events:none;
  opacity:0;
  visibility:hidden;
  transition:opacity 0.12s ease;
}
.batch-subject-item.done:hover::after{
  opacity:1;
  visibility:visible;
}

/* æ´»åŠ¨é¡¹ */
.batch-act-item{
  display:flex;
  align-items:center;
  padding:12px;
  margin-bottom:6px;
  border-radius:10px;
  cursor:pointer;
  background:#fff;
  border-left:3px solid transparent;
  transition:all 0.2s;
}
.batch-act-item:hover{
  background:#FFF8E1;
  transform:translateX(2px);
}
.batch-act-item.active{
  background:#FFF3E0;
  border-left-color:#FF9800;
  box-shadow:0 2px 8px rgba(255,152,0,0.1);
}

.batch-act-status{
  width:8px;
  height:8px;
  border-radius:50%;
  margin-right:12px;
  flex-shrink:0;
  background:#ccc;
}
.batch-act-status.ongoing{
  background:#4ECDC4;
  box-shadow:0 0 6px rgba(78,205,196,0.4);
}

.batch-act-name{
  font-size:14px;
  font-weight:700;
  color:#5D4037;
  margin-bottom:3px;
}
.batch-act-meta{
  font-size:11px;
  color:#A1887F;
}

/* å¼ºåˆ¶ç¦æ­¢æ¨ªå‘æ»šåŠ¨æ¡ï¼ˆä¿æŒä½ çš„â€œæ ¸å¿ƒä¿®æ­£â€ï¼‰ */
.batch-sidebar-stack,
.batch-panel-view,
.batch-picker-list-content,
.batch-subject-list{
  overflow-x:hidden !important;
  width:100%;
  box-sizing:border-box;
}

/* ================= è€ƒå‹¤ç»Ÿè®¡æ¡ & Tooltip ================= */
.batch-attendance-bar{
  display:flex;
  align-items:center;
  font-size:13px;
  margin-top:0;
  color:#8D6E63;
  flex-shrink:0;
  white-space:nowrap;

  /* è¿™é‡Œä¿ç•™ä½ çš„â€œæ‰‹åŠ¨ä½ç§»â€ */
  margin-left:50px;
  margin-right:0;
}

.att-item{ font-weight:600; }
.att-divider{ margin:0 8px; color:#D7CCC8; }
.att-item.active{ color:#4CAF50; }

/* è¯·å‡é¡¹ */
.att-item.leave{
  color:#FF9800;
  cursor:help;
  position:relative;
  padding:2px 6px;
  border-radius:4px;
  background:#FFF3E0;
}

.att-item.danger{
  color:#FF5252;
  font-weight:800;
}

/* tooltip */
.tooltip-container .tooltip-content{
  visibility:hidden;
  opacity:0;
  position:absolute;
  top:100%;
  left:50%;
  transform:translateX(-50%) translateY(5px);
  background:#5D4037;
  color:#fff;
  padding:8px 12px;
  border-radius:8px;
  width:140px;
  z-index:100;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  transition:all 0.2s;
  pointer-events:none;
}
.tooltip-container:hover .tooltip-content{
  visibility:visible;
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

.tooltip-title{
  font-size:11px;
  opacity:0.7;
  margin-bottom:4px;
  border-bottom:1px solid rgba(255,255,255,0.2);
  padding-bottom:2px;
  text-align:center;
}

.tooltip-list{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:4px;
  margin-top:4px;
}
.tooltip-list span{
  display:block;
  font-size:12px;
  line-height:1.4;
  text-align:center;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
