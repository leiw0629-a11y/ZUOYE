/* ================== 1. æ ¸å¿ƒ DNA (å˜é‡åº“) ================== */
/* ä»¥åæŠŠè¿™æ®µå‘ç»™AIï¼Œå®ƒå°±çŸ¥é“ç”¨ä»€ä¹ˆé¢œè‰²å’Œåœ†è§’ */
:root {
    /* å“ç‰Œè‰² */
    --primary: #FF6B6B;
    --primary-dark: #D32F2F;
    --primary-gradient: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%);
    --blue-gradient: linear-gradient(135deg, #4ECDC4 0%, #26A69A 100%);
    
    /* çŠ¶æ€è‰² */
    --danger: #FF5252;
    --success: #4ECDC4;
    --warning: #FFB74D;
    
    /* ç•Œé¢åŸºç¡€è‰² */
    --bg: #FFF9F0;             /* å…¨å±€ç±³è‰²èƒŒæ™¯ */
    --panel-bg: #FFFFFF;       /* å¡ç‰‡ç™½è‰²èƒŒæ™¯ */
    --text-main: #5D4037;      /* ä¸»æ–‡å­—è‰²ï¼ˆæ·±å’–ï¼‰ */
    --text-sub: #8D6E63;       /* æ¬¡è¦æ–‡å­—ï¼ˆæµ…å’–ï¼‰ */
    --border: #FFCCBC;         /* é€šç”¨è¾¹æ¡†è‰² */
    
    /* ç‰©ç†å±æ€§ */
    --radius: 16px;            /* ç»Ÿä¸€çš„å¤§åœ†è§’ */
    --radius-sm: 8px;          /* å°åœ†è§’ */
    --shadow-card: 0 8px 20px rgba(255, 107, 107, 0.15); /* å¡ç‰‡æµ®èµ·é˜´å½± */
    --shadow-sm: 0 2px 5px rgba(0,0,0,0.05);
}

/* ================== 2. ç”»å¸ƒé‡ç½® (Reset) ================== */
/* ç»Ÿä¸€æ‰€æœ‰æµè§ˆå™¨çš„åŸºç¡€è¡¨ç° */
* {
    box-sizing: border-box;
}

body {
    font-family: 'Nunito', 'Microsoft YaHei', sans-serif;
    background-color: var(--bg);
    color: var(--text-main);
    margin: 0; 
    padding: 20px; 
    height: 100vh; 
    overflow: hidden; /* é»˜è®¤é¡µé¢ä¸æ»šåŠ¨ï¼Œå†…éƒ¨æ»šåŠ¨ */
    
    /* é‚£ä¸ªæ ‡å¿—æ€§çš„æ³¢ç‚¹èƒŒæ™¯ */
    background-image: radial-gradient(#FFE0B2 1px, transparent 1px);
    background-size: 20px 20px;
	/* ğŸ”´ å¿…é¡»è¡¥å›è¿™ä¸¤è¡Œï¼Œå¦åˆ™å‚ç›´å¸ƒå±€æ— æ•ˆ */
    display: flex;
    flex-direction: column;
}

/* æ»šåŠ¨æ¡ç¾åŒ– */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #FFCCBC; border-radius: 10px; }

button {
    font-family: inherit;
    outline: none;
    cursor: pointer;
    border: none;
}

/* ================== 3. é€šç”¨å®¹å™¨ç»„ä»¶ (Containers) ================== */

/* åŸºç¡€ç™½è‰²å¡ç‰‡ (æ‰€æœ‰é¢æ¿çš„åŸºåº•) */
.panel-base {
    background: var(--panel-bg);
    border-radius: var(--radius);
    box-shadow: var(--shadow-card);
    border: 1px solid rgba(255,255,255,0.5);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* é¢æ¿é¡¶éƒ¨æ ‡é¢˜æ  */
.panel-header {
    padding: 15px;
    border-bottom: 2px dashed #FFEEE4;
    background: #fff;
    font-weight: 800;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
}

/* ================== 4. é€šç”¨äº¤äº’ç»„ä»¶ (UI Kit) ================== */

/* --- æŒ‰é’®ç³»åˆ— --- */

/* 1. å¹½çµæŒ‰é’® (æ¬¡è¦æ“ä½œ/å›¾æ ‡æŒ‰é’®) */
.btn-ghost {
    background: transparent;
    color: var(--text-sub);
    font-weight: 700;
    padding: 0 14px;
    height: 36px;
    border-radius: 50px;
    font-size: 13px;
    display: inline-flex; align-items: center; gap: 6px;
    transition: 0.2s;
}
.btn-ghost:hover { background: #FFF3E0; color: #E65100; }

/* 2. ä¸»è‰²è°ƒå®å¿ƒæŒ‰é’® (ä¿å­˜/ç¡®è®¤) */
.btn-primary, .btn-main {
    background: var(--blue-gradient);
    color: white;
    padding: 0 20px;
    height: 36px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 13px;
    box-shadow: 0 4px 10px rgba(78, 205, 196, 0.3);
    display: inline-flex; align-items: center; gap: 6px;
    transition: transform 0.2s;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(78, 205, 196, 0.4); }

/* 3. ç™½è‰²æè¾¹æŒ‰é’® (è¾…åŠ©æ“ä½œ) */
.btn-white {
    background: white;
    color: var(--text-main);
    border: 1px solid var(--border);
    padding: 0 15px;
    height: 32px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 12px;
    display: inline-flex; align-items: center; gap: 6px;
    box-shadow: var(--shadow-sm);
    transition: 0.2s;
}
.btn-white:hover { border-color: var(--primary); color: var(--primary); background: #FFFBF7; }

/* 4. å±é™©/è­¦å‘ŠæŒ‰é’® */
.btn-danger {
    background: #FFEBEE; color: #C62828; border: 1px dashed #FFCDD2;
    padding: 0 15px; height: 32px; border-radius: 50px; 
    font-weight: 700; font-size: 12px;
    display: inline-flex; align-items: center; gap: 6px;
}

/* --- è¡¨å•ç³»åˆ— --- */
.input-base {
    width: 100%;
    height: 40px;
    padding: 0 12px;
    box-sizing: border-box;
    border: 2px solid #FFE0B2;
    border-radius: 10px;
    background: white;
    font-family: inherit;
    font-size: 13px;
    color: var(--text-main);
    outline: none;
    transition: 0.2s;
}
.input-base:focus { 
    border-color: var(--primary); 
    box-shadow: 0 0 0 3px rgba(255,107,107,0.1); 
}

/* --- æ ‡ç­¾ç³»åˆ— --- */
.badge {
    padding: 2px 8px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 800;
    display: inline-block;
}

/* ================== 5. å¸ƒå±€è¾…åŠ©ç±» (Utilities) ================== */
.flex-center { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.w-full { width: 100%; }
.mt-10 { margin-top: 10px; }
.mb-10 { margin-bottom: 10px; }

/* ================== 6. æ ¸å¿ƒå¸ƒå±€æ¶æ„ (Layout Structure) ================== */
/* è¿™ä¸€éƒ¨åˆ†éå¸¸å…³é”®ï¼Œå†³å®šäº†é¡µé¢æ˜¯"å·¦å³åˆ†æ "è¿˜æ˜¯"å‚ç›´å †å " */

/* é¡¶éƒ¨å¯¼èˆªæ¡å®¹å™¨ */
.header {
    display: flex; 
    justify-content: space-between; /* ä¸¤ç«¯å¯¹é½ */
    align-items: center;
    background: var(--panel-bg); 
    padding: 12px 25px; 
    border-radius: var(--radius);
    box-shadow: var(--shadow-card); 
    margin-bottom: 20px; 
    flex-shrink: 0;
    border-left: 6px solid var(--primary);
}
.header h1 {
    margin: 0; font-size: 22px; font-weight: 800;
    background: var(--primary-gradient); 
    -webkit-background-clip: text; 
    -webkit-text-fill-color: transparent;
    display: flex; align-items: center; gap: 10px;
}

/* ä¸»å®¹å™¨ï¼šåŒ…è£¹ å·¦è¾¹æ  + ä¸­é—´ + å³è¾¹æ  */
.layout-container { 
    display: flex; /* å…³é”®ï¼šå¼€å¯å¼¹æ€§å¸ƒå±€ï¼Œè®©å­å…ƒç´ æ¨ªå‘æ’åˆ— */
    gap: 20px;     /* æ ç›®ä¹‹é—´çš„é—´è· */
    flex: 1;       /* å æ»¡å‰©ä½™é«˜åº¦ */
    min-height: 0; /* é˜²æ­¢å†…å®¹è¿‡å¤šæ’‘ç ´å®¹å™¨ï¼Œé…åˆ overflow ä½¿ç”¨ */
    overflow: hidden;
}

/* --- ä¸‰å¤§åŒºåŸŸçš„åŸºç¡€å®½é«˜ç­‰è®¾ç½® --- */

/* 1. å·¦ä¾§æ  (å›ºå®šå®½åº¦) */
.sidebar { 
    width: 280px; 
    flex-shrink: 0; /* ç¦æ­¢è¢«å‹ç¼© */
    /* æ³¨æ„ï¼šå…·ä½“çš„ .panel-base æ ·å¼å·²ç»ç”± global é‡Œçš„ç±»å®šä¹‰äº†ï¼Œè¿™é‡Œåªå®šå®½ */
}

/* 2. ä¸­é—´åŒºåŸŸ (è‡ªé€‚åº”å®½åº¦) */
.main-area { 
    flex: 1; /* è‡ªåŠ¨å æ®å‰©ä½™ç©ºé—´ */
    background: #FFF; 
    position: relative;
    display: flex;          /* è®©å†…éƒ¨çš„ TopBar å’Œ Grid ä¹Ÿèƒ½å‚ç›´æ’åˆ— */
    flex-direction: column; 
    overflow: hidden;       /* å†…éƒ¨æ»šåŠ¨ */
}

/* ä¸­é—´åŒºåŸŸçš„é¡¶éƒ¨æ¡ (è¿›åº¦æ¡/æŒ‰é’®) */
.main-top-bar {
    padding: 12px 20px; 
    display: flex; 
    align-items: center; 
    justify-content: space-between;
    background: linear-gradient(to bottom, #fff, #FFFDF9); 
    border-bottom: 1px solid #FFF3E0;
    flex-shrink: 0;
}

/* 3. å³ä¾§æ  (å›ºå®šå®½åº¦) */
.right-panel { 
    width: 280px; 
    flex-shrink: 0; 
    background: #FAFAFA; 
}

/* ä¿®å¤ #app-components å¯¼è‡´çš„é«˜åº¦å¡Œé™·é—®é¢˜ */
#app-components {
    flex: 1;                /* 1. è‡ªåŠ¨å æ»¡ body å‰©ä½™çš„æ‰€æœ‰é«˜åº¦ */
    display: flex;          /* 2. å˜æˆå¼¹æ€§ç›’å­ï¼Œä¼ å¯¼å¸ƒå±€ç»™å­å…ƒç´  */
    flex-direction: column; /* 3. ä¿æŒå‚ç›´æ–¹å‘ */
    min-height: 0;          /* 4. å…³é”®ï¼é˜²æ­¢å†…éƒ¨æ»šåŠ¨æ¡å¤±æ•ˆæº¢å‡º */
    width: 100%;            /* 5. å®½åº¦å æ»¡ */
    overflow: hidden;       /* 6. é˜²æ­¢å‡ºç°åŒé‡æ»šåŠ¨æ¡ */
}

/* ğŸ”´ ä¿®å¤ä¾§è¾¹æ åˆ‡æ¢åçš„å¸ƒå±€é”™ä¹± */
.sidebar-container {
    display: flex;          /* å˜æˆå¼¹æ€§ç›’å­ */
    flex-direction: column; /* å…³é”®ï¼å¼ºåˆ¶ä»ä¸Šåˆ°ä¸‹å‚ç›´æ’åˆ— */
    height: 100%;           /* å æ»¡çˆ¶å®¹å™¨é«˜åº¦ */
    width: 100%;            /* å æ»¡å®½åº¦ */
    overflow: hidden;       /* é˜²æ­¢æº¢å‡º */
}

/* 2. ç¼–è¾‘çŠ¶æ€ (ç­ä¸»ä»»åå°æ¨¡å¼) */
/* å½“ body åŠ ä¸Šäº† .is-editing ç±»æ—¶ï¼š */
body.is-editing .btn-config { 
    display: flex !important; /* æ˜¾ç¤ºé…ç½®æŒ‰é’® */
}
body.is-editing .btn-homework-batch { 
    display: none !important; /* éšè—ä½œä¸šæŒ‰é’® */
}

/* ================== è¡¥å›ï¼šé—æ¼çš„æŒ‰é’®æ ·å¼ ================== */

/* 1. ä¿å­˜æ•°æ®æŒ‰é’® (è§£å†³é—®é¢˜3) */
.btn-save {
    background: var(--blue-gradient); color: white; border: none;
    padding: 0 20px; height: 36px; border-radius: 50px; font-weight: 700; font-size: 13px;
    box-shadow: 0 4px 10px rgba(78, 205, 196, 0.3); cursor: pointer;
    display: flex; align-items: center; gap: 6px; transition: transform 0.2s;
}
.btn-save:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(78, 205, 196, 0.4); }

/* 2. å…¨å®½å¤§æŒ‰é’® (ç”¨äºå¤åˆ¶æ–‡æ¡ˆ/ä¿å­˜é…ç½®) (è§£å†³é—®é¢˜2, 5) */
.btn-full {
    width: 100%; height: 40px; border-radius: 8px; border: none;
    background: #E65100; color: white; font-weight: bold; cursor: pointer;
    box-shadow: 0 3px 8px rgba(230, 81, 0, 0.3); transition: 0.2s;
    /* è¡¥ä¸Šflexå¸ƒå±€é˜²æ­¢æ–‡å­—å›¾æ ‡ä¸å±…ä¸­ */
    display: flex; align-items: center; justify-content: center; gap: 5px;
}
.btn-full:hover { background: #EF6C00; }

/* 3. æ‰¹é‡é…ç½®æŒ‰é’®çš„åŸºç¡€å¤–è§‚ (è§£å†³é—®é¢˜1) */
/* æ³¨æ„ï¼šä½ ç°åœ¨çš„ä»£ç åªæ§åˆ¶äº†å®ƒçš„æ˜¾ç¤º/éšè—ï¼Œæ¼äº†å®ƒé•¿ä»€ä¹ˆæ · */
.btn-config {
    background: #FFEBEE; color: #C62828; border: 1px dashed #FFCDD2;
    padding: 0 15px; height: 32px; border-radius: 50px; font-weight: 700; font-size: 12px;
    cursor: pointer; align-items: center; gap: 6px;
    /* è¿™é‡Œä¸å†™displayï¼Œdisplayç”±åº•éƒ¨çš„ .is-editing æ§åˆ¶ */
}
.btn-config:hover { background: #FFCDD2; }